<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daydream Classic</title>
  <link href="./src/output.css" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-no-repeat bg-cover bg-center h-screen p-5 font-PP"
      x-data="{
        flavors: {
          'Brownie Avalanche': { quantity: 1, selectedSize: '' },
          'Oreo Strawberry': { quantity: 1, selectedSize: '' },
          'Oreo Chocolate':{ quantity: 1, selectedSize: '' }
        },
        selectedFlavor: 'Brownie Avalanche',

        addToCart() {
          const prices = { Small: 55, Medium: 69, Large: 85 };
          let anyAdded = false;

          for (const [flavorflavor, data] of Object.entries(this.flavors)) {
            if (data.selectedSize && data.quantity > 0) {
              const price = prices[data.selectedSize];

              const item = {
                name: 'DayDream Classic',
                flavor: flavorflavor,
                size: data.selectedSize,
                quantity: data.quantity,
                price: price
              };

              // Save in localStorage
              let cart = JSON.parse(localStorage.getItem('cart')) || [];
              cart.push(item);
              localStorage.setItem('cart', JSON.stringify(cart));

              window.parent.postMessage({ type: 'addToCart', item: item }, '*');

              // Reset after adding
              data.quantity = 1;
              data.selectedSize = '';
              anyAdded = true;
            }
          }

          if (anyAdded) {
            alert('Selected items added to cart!');
          } else {
            alert('Please select size and quantity for at least one flavor!');
          }
        }
      }">

  <h1 class="text-xl max-[780px]:text-sm mb-4 max-[780px]:mb-0">DayDream Classic Flavors</h1>

  <div class="flex flex-1 space-x-5 overflow-x-auto items-start px-2 py-3 no-scrollbar">

    <!-- Brownie Avalanche -->
    <div class="rounded-2xl" @click="selectedFlavor='Brownie Avalanche'">
      <div class="bg-white w-fit p-5 drop-shadow-sm flex flex-col justify-center items-center space-y-3 rounded-2xl max-[780px]:space-y-2 max-[780px]:p-4">

        <!-- Image -->
        <div class="bg-[#FFFBFB] shadow-sm rounded-2xl py-6 mt-6 px-1 h-[135px] items-center drop-shadow-sm">
          <img src="flavors/dayDreamClassicFlavors/brownieAvalanche.png" alt="Brownie Avalanche" class="-mt-15 ml-7 w-[126px] h-[126px]">
          <h1 class="text-center text-lg px-1 max-[780px]:text-sm">Brownie Avalanche</h1>
        </div>

        <!-- Sizes -->
        <div class="space-y-3 max-[780px]:space-y-2">
          <template x-for="size in ['Small','Medium','Large']" :key="size">
            <div>
              <div @click.stop="flavors['Brownie Avalanche'].selectedSize = size"
                   :class="flavors['Brownie Avalanche'].selectedSize === size ? 'bg-blue-200' : ''"
                   class="p-2 px-10 rounded-full inset-shadow-sm shadow active:scale-95 cursor-pointer text-center">
                <div class="flex items-center">
                  <h1 class="max-[780px]:text-sm pr-2 text-center" x-text="size + ':'"></h1>
                  <p class="pr-0.5">₱</p>
                  <p class="text-xs mt-0.5" x-text="size==='Small'?55:size==='Medium'?69:85"></p>
                </div>
              </div>
            </div>
          </template>
        </div>

        <!-- Quantity -->
        <div class="flex justify-between space-x-7 p-1 px-5 rounded-full inset-shadow-sm shadow overflow-hidden">
          <button @click.stop="if(flavors['Brownie Avalanche'].quantity > 1) flavors['Brownie Avalanche'].quantity--; else flavors['Brownie Avalanche'].quantity=1" class="px-2.5 bg-gray-300 hover:bg-gray-400 font-bold rounded-full">−</button>
          <span class="px-4 py-1 bg-white text-gray-800">
            <span x-text="flavors['Brownie Avalanche'].quantity"></span>
          </span>
          <button @click.stop="flavors['Brownie Avalanche'].quantity++" class="px-2.5 bg-gray-300 hover:bg-gray-400 font-bold rounded-full">+</button>
        </div>
      </div>
    </div>

    <!-- Oreo Strawberry -->
    <div class="rounded-2xl" @click="selectedFlavor='Oreo Strawberry'">
      <div class="bg-white w-fit p-5 drop-shadow-sm flex flex-col justify-center items-center space-y-3 rounded-2xl max-[780px]:space-y-2 max-[780px]:p-4">

        <!-- Image -->
        <div class="bg-[#FFFBFB] shadow-sm rounded-2xl py-6 mt-6 px-1 h-[135px] items-center drop-shadow-sm">
          <img src="flavors/dayDreamClassicFlavors/oreoStrawberry.png" alt="Oreo Strawberry" class="-mt-15 ml-7 w-[126px] h-[126px]">
          <h1 class="text-center text-lg px-1 max-[780px]:text-sm">Oreo Strawberry</h1>
        </div>

        <!-- Sizes -->
        <div class="space-y-3 max-[780px]:space-y-2">
          <template x-for="size in ['Small','Medium','Large']" :key="size">
            <div>
              <div @click.stop="flavors['Oreo Strawberry'].selectedSize = size"
                   :class="flavors['Oreo Strawberry'].selectedSize === size ? 'bg-blue-200' : ''"
                   class="p-2 px-10 rounded-full inset-shadow-sm shadow active:scale-95 cursor-pointer text-center">
                <div class="flex items-center">
                  <h1 class="max-[780px]:text-sm pr-2 text-center" x-text="size + ':'"></h1>
                  <p class="pr-0.5">₱</p>
                  <p class="text-xs mt-0.5" x-text="size==='Small'?55:size==='Medium'?69:85"></p>
                </div>
              </div>
            </div>
          </template>
        </div>

        <!-- Quantity -->
        <div class="flex justify-between space-x-7 p-1 px-5 rounded-full inset-shadow-sm shadow overflow-hidden">
          <button @click.stop="if(flavors['Oreo Strawberry'].quantity > 1) flavors['Oreo Strawberry'].quantity--; else flavors['Oreo Strawberry'].quantity=1" class="px-2.5 bg-gray-300 hover:bg-gray-400 font-bold rounded-full">−</button>
          <span class="px-4 py-1 bg-white text-gray-800">
            <span x-text="flavors['Oreo Strawberry'].quantity"></span>
          </span>
          <button @click.stop="flavors['Oreo Strawberry'].quantity++" class="px-2.5 bg-gray-300 hover:bg-gray-400 font-bold rounded-full">+</button>
        </div>
      </div>
    </div>

    <!-- Oreo Chocolate -->
    <div class="rounded-2xl" @click="selectedFlavor='Oreo Chocolate'">
      <div class="bg-white w-fit p-5 drop-shadow-sm flex flex-col justify-center items-center space-y-3 rounded-2xl max-[780px]:space-y-2 max-[780px]:p-4">

        <!-- Image -->
        <div class="bg-[#FFFBFB] shadow-sm rounded-2xl py-6 mt-6 px-1 h-[135px] items-center drop-shadow-sm">
          <img src="flavors/dayDreamClassicFlavors/oreoChocolate.png" alt="Oreo Chocolate" class="-mt-15 ml-7 w-[126px] h-[126px]">
          <h1 class="text-center text-lg px-1 max-[780px]:text-sm">Oreo Chocolate</h1>
        </div>

        <!-- Sizes -->
        <div class="space-y-3 max-[780px]:space-y-2">
          <template x-for="size in ['Small','Medium','Large']" :key="size">
            <div>
              <div @click.stop="flavors['Oreo Chocolate'].selectedSize = size"
                   :class="flavors['Oreo Chocolate'].selectedSize === size ? 'bg-blue-200' : ''"
                   class="p-2 px-10 rounded-full inset-shadow-sm shadow active:scale-95 cursor-pointer text-center">
                <div class="flex items-center">
                  <h1 class="max-[780px]:text-sm pr-2 text-center" x-text="size + ':'"></h1>
                  <p class="pr-0.5">₱</p>
                  <p class="text-xs mt-0.5" x-text="size==='Small'?55:size==='Medium'?69:85"></p>
                </div>
              </div>
            </div>
          </template>
        </div>

        <!-- Quantity -->
        <div class="flex justify-between space-x-7 p-1 px-5 rounded-full inset-shadow-sm shadow overflow-hidden">
          <button @click.stop="if(flavors['Oreo Chocolate'].quantity > 1) flavors['Oreo Chocolate'].quantity--; 
                    else flavors['Oreo Chocolate'].quantity=1" 
                    class="px-2.5 bg-gray-300 hover:bg-gray-400 font-bold rounded-full">−</button>
          <span class="px-4 py-1 bg-white text-gray-800">
            <span x-text="flavors['Oreo Chocolate'].quantity"></span>
          </span>
          <button @click.stop="flavors['Oreo Chocolate'].quantity++" 
                class="px-2.5 bg-gray-300 hover:bg-gray-400 font-bold rounded-full">+</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Add to Cart -->
  <div class="shrink-0 pb-2 flex float-right mt-3">
    <button class="active:scale-95" @click="addToCart()">
      <img src="buttonPic/addToOrderBtn.png" alt="Add to Button" class="w-[130px] h-[40px]">
    </button>
  </div>

</body>
</html>
