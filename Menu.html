<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swirls Menu</title>

    <link href="./src/output.css" rel="stylesheet">
    <script src="//unpkg.com/alpinejs" defer></script>
</head>
<body >

<div x-data="{
    open: false,
    src: '',
    cart: [],
    sizeLabels: { Small: '8oz', Medium: '12oz', Large: '16oz' },

    init() {
        this.loadCart()

        window.addEventListener('storage', () => {
            this.loadCart()
        })
    },

    loadCart(){
        this.cart = JSON.parse(localStorage.getItem('cart')) || []
    },

    clearCart(){
        localStorage.removeItem('cart')
        this.cart = []
    },

    removeItem(index){
        this.cart.splice(index, 1)
        localStorage.setItem('cart', JSON.stringify(this.cart))
    }

}">


 <!--background-->
    <div class=" bg-no-repeat bg-cover bg-center h-screen  font-PP"
    style="background-image: url('img/settings_sales_ordererzxs.png');" >
    

<!-- ================= Cart ================= -->
        <aside class="float-end w-[25%] max-[780px]:w-[36%] bg-white h-screen shadow flex flex-col">

            <!-- Header -->
            <div class="py-5 shadow-sm shrink-0">
                <h1 class="text-center text-2xl max-[780px]:text-xl">
                    Current Order
                </h1>
            </div>

            <!-- Orders Label -->   
            <div class=" flex justify-end text-sm mr-8 space-x-4
                        max-[780px]:text-[9px] max-[780px]:space-x-3 
                        max-[780px]:mr-8 mt-3">
                <p class="pr-2">Size</p>
                <p class="">Qty</p>
                <p class="">Amount</p>
            </div>
            <!-- Orders (Scrollable ) -->
            <div class="flex-1 overflow-y-auto px-2 drop-shadow-2xl space-y-2">

                <template x-for="(item, index) in cart" :key="index">

                    <div class="flex space-x-1">
                        <div class="flex flex-col  p-2 rounded-xl border border-black/20 w-85 
                                  text-sm  max-[780px]:text-[10px]">
                            <!-- Left Side -->
                            <div class="flex justify-between   ">
                                <!-- Item name -->
                                <div class=" ">
                                    <p class="font-semibold max-[780px]:mr-2  " 
                                       x-text="item.name"></p>

                                   <!-- Right Side -->
                                    <div class="flex flex-row justify-between w-full">
                                        <!-- Item flavor -->
                                        <p class="text-black"
                                        x-text="item.flavor">
                                        </p>      


                                    </div>
                                </div>

                            <div class="flex flex-col">

                                <div class="flex space-x-7 max-[780px]:space-x-5 ">
                                    <!-- Item size -->
                                    <p x-text="item.size ? ' ' + sizeLabels[item.size] : ''"></p>
                                    <!-- Item quantity -->
                                    <p class=" " 
                                        x-text="item.quantity">
                                    </p>
                                    <!-- Item price -->
                                    <p class=" " 
                                        x-text="'₱' + Number(item.price).toFixed(2) ">
                                    </p>
                                </div>
                                    <!-- Item Total -->
                                    <div class="font-bold text-right"
                                            x-text="'₱' + (Number(item.price) * Number(item.quantity)).toFixed(2)">
                                    </div>
                            </div>




                            </div>

                        </div>


                            <!-- Delete Button -->
                            <div class="flex   ">
                            <!-- clear item button -->
                                <button 
                                    @click="removeItem(index)"
                                    class="active:scale-95 hover:opacity-80 transition"
                                >
                                    <img 
                                        src="buttonPic/delete.png" 
                                        alt="Delete"
                                        class="w-5 h-4"
                                    >
                                </button>
                            </div>

                    </div>

                </template>


            </div>

            <!-- Clear All -->
            <div class="text-right  p-2 mr-3 ">
                    <button 
                        @click="clearCart()"
                        class="text-red-500  max-[780px]:text-xs text-sm underline hover:text-red-700  rounded-lg active:scale-95  hover:active:scale-95">
                        Clear All
                    </button>
            </div>

            <!-- Footer  -->
            <div class="p-4 border-t border-black/20 shrink-0 shadow">

            <!-- Total -->
            <div class="text-sm mb-3 flex justify-between">
                <h1>Total: </h1>
                <h1 x-text="'₱' + cart
                    .reduce((sum, i) => sum + Number(i.price) * Number(i.quantity), 0)
                    .toFixed(2)">
                </h1>
            </div>

                
                <!-- Chect Out -->

                <div>
                    <a href="checkOut.html">
                    <button class="active:scale-95">
                        <img 
                            src="buttonPic/checkOutButton.png" 
                            alt="Check Out"
                        >
                    </button>
                    </a>
                </div>
            


            </div>

        </aside>



<!-- ================= Items ================= -->
        <section>

            <header class="">
                    <!--Logo-->
                
                        <div class="flex items-center p-5 space-x-5  max-[780px]:space-x-2">

                            <!--logo-->
                            <div class="">
                                <a href="index.html"><img src="img/swirls-logo.webp" alt="logo"
                                class="w-[85px] h-[85px] 
                                    max-[780px]:w-[55px] max-[780px]:h-[55px] " ></a>
                            </div>

                            <h1 class="text-2xl  max-[780px]:text-xl ">Menu</h1>
                        </div>
                
            </header>
            
                
            <!--mga tinda to ahahaha-->
            <main>

                <!--Product-->
                <div class="flex flex-wrap items-center justify-center ">

                    <!--DayDream Classic-->
                    <div class=" ">
                        <img 
                            src="product/dayDreamClassic.png" 
                            alt=""
                            class="active:scale-95 
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"  
                                    @click="src='ddClassic.html'; open = true"
                        >
                    </div>

                    <!--Big Cone-->
                    <div class=" ">
                        <img 
                            src="product/bigCone.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='bigcone.html'; open = true"
                        >
                    </div>

                    <!--Sundae Cup-->
                    <div class=" ">
                        <img 
                            src="product/sundaeCup.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='sundaeCup.html'; open = true"
                        >
                    </div>

                    <!--Sundae Cone-->
                    <div class=" ">
                        <img 
                            src="product/sundaeCone.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='sundaeCone.html'; open = true"
                        >
                    </div>

                    <!--DayDream Premium-->
                    <div class=" ">
                        <img 
                            src="product/dayDreamPremium.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='ddpremium.html'; open = true"
                        >
                    </div>

                    <!--Swirls Delight-->
                    <div class=" ">
                        <img 
                            src="product/swirlsDelight.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='swirlD.html'; open = true"
                        >
                    </div>

                    <!--Vanilla Cone-->
                    <div class=" ">
                        <img 
                            src="product/vanillaCone.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='vanillaC.html'; open = true"
                        >
                    </div>


                    <!--Soda Float-->
                    <div class=" ">
                        <img 
                            src="product/sodaFloat.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='sodaFl.html'; open = true"
                        >
                    </div>

                    <!--Carfait-->
                    <div class=" ">
                        <img 
                            src="product/carfait.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='carfait.html'; open = true"
                        >
                    </div>


                    <!--Milk Shake-->
                    <div class=" ">
                        <img 
                            src="product/milkShake.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='mlkshake.html'; open = true"
                        >
                    </div>

                    <!--Milk Shake-->
                    <div class=" ">
                        <img 
                            src="product/iceCoffeeFloat.png" 
                            alt=""
                            class="active:scale-95
                                    w-[178px] h-[179px] 
                                    max-[780px]:w-[118px] max-[780px]:h-[119px]"
                                    @click="src='iceflt.html'; open = true"
                                    
                        >
                    </div>
                    

                </div>
             <!--back Btn-->
                <div class="p-5 w-fit">
                    <a href="index.html">
                    <img 
                        src="buttonPic/backButton.png" 
                        alt=""
                        class="active:scale-95
                        w-[110px] h-[35px] 
                                    max-[780px]:w-[100px] max-[780px]:h-[30px]"
                    >
                    </a>
                </div>

            </main>
        </section>

       
<!-- ================= MODAL ================= -->
<div 
    x-show="open"
    x-transition.opacity
    x-cloak
    @keydown.escape.window="open = false"
    class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"
    @click.self="open = false"
>

    <div 
        x-transition.scale
        class="bg-[#FFF6F6] rounded-2xl shadow-2xl relative overflow-hidden
           w-full  max-w-5xl h-[70vh]  
           max-[780px]:max-w-2xl max-[780px]:h-[90vh] "
    >

        <!-- Close Button -->
        <button 
            @click="open = false"
            class="absolute top-2 right-3  font-black text-black 
                    text-2xl z-10 m-4 -mt-0 max-[780px]:text-xl">
            ✕
        </button>

        <!-- Load Second File -->
        <iframe
            :src="src"
            class="w-full h-full border-none">
        </iframe>

    </div>
</div>

    </div>
    </div>
</body>
</html>